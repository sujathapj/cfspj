<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>ColdFusion, English documentation : Administering ColdFusion Security</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body>
        <div id="page">
            <div id="main">
                <div id="main-header" class="pageSectionHeader">
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            ColdFusion, English documentation : Administering ColdFusion Security
                        </span>
                    </h1>

                    <div class="page-metadata">
                        <p>This page last changed on Nov 03, 2014 by <font color="#0050B2">charlie@carehart.org</font>.</p>
                    </div>
                </div>

                <div id="content" class="view">
                    <div id="main-content" class="wiki-content group">
                    <p>You can secure many Adobe ColdFusion resources using password authentication and configure sandbox security.</p><p><span class="confluence-anchor-link" id="AdministeringColdFusionSecurity-backtotop"></span></p><p><style type='text/css'>/*<![CDATA[*/
div.rbtoc1427966369839 {margin-left: 1.5em;padding: 0px;}
div.rbtoc1427966369839 ul {margin-left: 0px;padding-left: 10px;}
div.rbtoc1427966369839 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='rbtoc1427966369839'>
<ul>
    <li><a href='#AdministeringColdFusionSecurity-AboutColdFusionsecurity'>About ColdFusion security</a></li>
    <li><a href='#AdministeringColdFusionSecurity-Usingpasswordprotection'>Using password protection</a></li>
<ul>
    <li><a href='#AdministeringColdFusionSecurity-ColdFusionAdministratorpasswordprotection'>ColdFusion Administrator password protection</a></li>
    <li><a href='#AdministeringColdFusionSecurity-Configurableseedforpasswordencryption'>Configurable seed for password encryption</a></li>
    <li><a href='#AdministeringColdFusionSecurity-RDSpasswordprotection'>RDS password protection</a></li>
</ul>
    <li><a href='#AdministeringColdFusionSecurity-EnhancingColdFusionSecurityonWindows'>Enhancing ColdFusion Security on Windows</a></li>
    <li><a href='#AdministeringColdFusionSecurity-Exposingservicestousers'>Exposing services to users</a></li>
    <li><a href='#AdministeringColdFusionSecurity-ConfigureIPaddresstoaccessexposedservices'>Configure IP address to access exposed services</a></li>
    <li><a href='#AdministeringColdFusionSecurity-RestrictingaccesstoColdFusionAdministrator'>Restricting access to ColdFusion Administrator</a></li>
    <li><a href='#AdministeringColdFusionSecurity-EnablingSecureProfileforColdFusionAdministrator'>Enabling Secure Profile for ColdFusion Administrator</a></li>
<ul>
    <li><a href='#AdministeringColdFusionSecurity-AdministratorsettingsaffectedbyenablingSecureProfile'>Administrator settings affected by enabling Secure Profile</a></li>
</ul>
    <li><a href='#AdministeringColdFusionSecurity-ChangesinSecureProfileColdFusion11'>Changes in Secure Profile (ColdFusion 11)</a></li>
    <li><a href='#AdministeringColdFusionSecurity-Usingsandboxsecurity'>Using sandbox security</a></li>
<ul>
    <li><a href='#AdministeringColdFusionSecurity-UsingmultiplesandboxesEnterpriseEditiononly'>Using multiple sandboxes (Enterprise Edition only)</a></li>
    <li><a href='#AdministeringColdFusionSecurity-Resourcesthatyoucanrestrict'>Resources that you can restrict</a></li>
    <li><a href='#AdministeringColdFusionSecurity-Aboutdirectoriesandpermissions'>About directories and permissions</a></li>
    <li><a href='#AdministeringColdFusionSecurity-AddasandboxEnterpriseEditiononly'>Add a sandbox (Enterprise Edition only)</a></li>
    <li><a href='#AdministeringColdFusionSecurity-Configureasandbox'>Configure a sandbox</a></li>
    <li><a href='#AdministeringColdFusionSecurity-SandboxConsiderations'>Sandbox Considerations</a></li>
<ul>
    <li><a href='#AdministeringColdFusionSecurity-UsingOpenOfficewithinSandbox'>Using OpenOffice within Sandbox</a></li>
    <li><a href='#AdministeringColdFusionSecurity-UsingCachingwithinSandbox'>Using Caching within Sandbox</a></li>
    <li><a href='#AdministeringColdFusionSecurity-UsingServiceCFCswithinSandbox'>Using Service CFCs within Sandbox</a></li>
</ul>
</ul>
</ul></div></p><hr /><p><strong><em><a href="Administering%2BColdFusion%2BSecurity.html">#back to top</a></em></strong></p><h2 id="AdministeringColdFusionSecurity-AboutColdFusionsecurity">About ColdFusion security</h2><p>Security is especially important in web-based applications, such as those you develop in ColdFusion. ColdFusion developers and administrators must fully understand the security risks that could affect their development and runtime environments so they can enable and restrict access appropriately.<br />Whether you have an e-commerce site where customers enter credit card information or a global collaboration site where users share confidential data, you should understand the security risks that could threaten your web applications.</p><ul><li><strong>Snooping and eavesdropping:</strong> Someone can monitor data sent over the public connections of the web.</li><li><strong>User impersonation:</strong> Someone can impersonate a trusted user to gain access to information that only the trusted user should see or download.</li><li><strong>Unauthorized access:</strong> Unauthorized users can gain access to sensitive information. This security risk is the most complex because the Internet links every computer to one large network. Completely allowing or disallowing access to a given system or data source is relatively straight-forward, but allowing the partial access required for an application to be useful remains risky. For example, a bank can easily publish a public, freely accessible site with general banking information. Creating an account maintenance site where users have exclusive access to their own personal account information is more difficult.<br />ColdFusion provides a highly secure environment for web application development and deployment. It helps you reduce security risks in the following ways:</li><li><strong>Encryption:</strong> Use of the Secure Sockets Layer (SSL) protocol prevents snooping, eavesdropping, and message tampering as information passes between clients and servers. SSL, which is supported by most web servers, encrypts Internet protocols (such as HTTP) with public key cryptography. A private key resides on the server to decrypt inbound data and encrypt outbound data.After the key is installed, the web server automatically handles encryption and decryption.</li><li><strong>Authentication:</strong> Authentication checks whether someone is a valid system user. It prompts a user for a unique login or user name, and a password or personal identification number (PIN).</li><li><strong>Access Control:</strong> Authenticated users have access to particular features or components based on security clearance, group affiliation, or other criteria specified by the developer.<br />You can implement <em>development security</em> by requiring a password to use the ColdFusion Administrator and a password for Remote Development Services (RDS), which allows developers to develop CFML pages remotely. You implement <em>runtime security</em> in your CFML pages and in the ColdFusion Administrator. ColdFusion has the following runtime security categories:</li><li><strong>User security</strong> Programmatically determine the logged-in user and allow or disallow restricted functionality based on the roles assigned to that user. For more information about user security, see ColdFusion security features in Securing Applications in the <em>Developing ColdFusion Applications</em>.</li><li><p><strong>Sandbox security </strong>Using the ColdFusion Administrator, define the actions and resources that the ColdFusion pages in and below a specified directory can use.</p><div class='panelMacro'><table class='noteMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/warning.png" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>Note</b><br /><p>In ColdFusion 11, you can configure multiple security sandboxes irrespective of the edition that you are using. However, for the previous versions (ColdFusion 10 or older), you can configure multiple security sandboxes only when you are using the Enterprise Edition.</p></td></tr></table></div><p>The Security area in the Administrator lets you do the following tasks:</p><br /><ul><li>Configure password protection for the ColdFusion Administrator. For more information, see <a href="https://wikidocs.adobe.com/wiki/display/coldfusionen/Administering+ColdFusion+Security#AdministeringColdFusionSecurity-Usingpasswordprotection" rel="nofollow">Using password protection</a>.</li><li>Configure password protection for RDS access. For more information, see <a href="https://wikidocs.adobe.com/wiki/display/coldfusionen/Administering+ColdFusion+Security#AdministeringColdFusionSecurity-RDSpasswordprotection" rel="nofollow">RDS password protection</a>.</li><li>Enable, disable, and customize ColdFusion security, on the Security &gt; Sandbox Security page (called Resource Security page in the Standard edition). For more information, see <a href="https://wikidocs.adobe.com/wiki/display/coldfusionen/Administering+ColdFusion+Security#AdministeringColdFusionSecurity-Usingsandboxsecurity" rel="nofollow">Using sandbox security</a>.<hr /><strong><em><a href="Administering%2BColdFusion%2BSecurity.html">#back to top</a></em></strong></li></ul></li></ul><h2 id="AdministeringColdFusionSecurity-Usingpasswordprotection">Using password protection</h2><p>Password protection restricts access to the ColdFusion Administrator and to a ColdFusion server when you attempt access through RDS security.</p><h3 id="AdministeringColdFusionSecurity-ColdFusionAdministratorpasswordprotection">ColdFusion Administrator password protection</h3><p>Secure access to the ColdFusion Administrator is enabled by default. The password that you enter during installation is saved as the default. You are prompted to enter this password whenever you open the Administrator.<br />Password protection for accessing the Administrator helps guard against unauthorized modifications of ColdFusion, and Adobe recommends using passwords. You can disable or change the Administrator password on the Security &gt; CF Admin Password page.</p><h3 id="AdministeringColdFusionSecurity-Configurableseedforpasswordencryption">Configurable seed for password encryption</h3><p>You can specify a new seed value to encrypt data source passwords.<br />To modify the default seed value assigned by ColdFusion or to change the value you specified,</p><ol><li>In the ColdFusion Administrator, got to Security &gt; Administrator and then in the Password Seed section, specify the new seed value between 8-500 characters.</li><li><p>Click Submit Changes.</p><div class='panelMacro'><table class='noteMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/warning.png" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>Note</b><br /><p>When you modify the seed value, all data source connections are reset. Therefore, Adobe recommends that you perform this task when the server is idle or at the initial phase (after installation).</p></td></tr></table></div></li></ol><h3 id="AdministeringColdFusionSecurity-RDSpasswordprotection">RDS password protection</h3><p>If you configured password protection for RDS access when you installed ColdFusion, you are prompted for the password when you attempt to access ColdFusion from Dreamweaver MX 2004, HomeSite+, or the ColdFusion Report Builder.<br />You can disable RDS or change the RDS password on the Security &gt; RDS Password page.</p><div class='panelMacro'><table class='noteMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/warning.png" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>Note</b><br /><p>Disabling RDS also disables the applet that the ColdFusion Administrator uses in file-related dialog boxes.</p></td></tr></table></div><p>If you use RDS security, you rely on web server and operating system security settings to set permissions for ColdFusion application and document directories.</p><hr /><p><strong><em><a href="Administering%2BColdFusion%2BSecurity.html">#back to top</a></em></strong></p><h2 id="AdministeringColdFusionSecurity-EnhancingColdFusionSecurityonWindows">Enhancing ColdFusion Security on Windows</h2><p>To enhance security for the ColdFusion server on Windows, restrict access to the following files to selected ColdFusion users:</p><ul><li>/cfusion/lib/seed.properties</li><li>/cfusion/lib/password.properties</li><li>/cfusion/lib/license.properties</li><li>/cfusion/bin/passwordreset.bat</li><li>/cfusion/bin/cf-passwordreset.jar<hr /><strong><em><a href="Administering%2BColdFusion%2BSecurity.html">#back to top</a></em></strong></li></ul><h2 id="AdministeringColdFusionSecurity-Exposingservicestousers">Exposing services to users</h2><p>ColdFusion exposes many existing enterprise services as web services. You can access these services using SOAP and AMF/Flash remoting.<br />The following are the exposed services:</p><ul><li>cfpdf</li><li>cfImage</li><li>cfdocument</li><li>cfmail</li><li>cfpop</li><li>cfchart</li><li>upload service<br />You can secure the exposed services to prevent access by unknown applications or users. This can be done by configuring the client IP address range to which services are accessible. Also, you can set up user access control for the services.<br />On the Security &gt; User Manager page, you can select the services available to a user from the Exposed Services section. <br />By default, all the services are listed in the Prohibited Services drop-down list. Press CTRL and select the services that you want the user to avail and click the &lt;&lt; button. <br />Now, click Edit User to implement the changes to the user settings.<hr /><strong><em><a href="Administering%2BColdFusion%2BSecurity.html">#back to top</a></em></strong></li></ul><h2 id="AdministeringColdFusionSecurity-ConfigureIPaddresstoaccessexposedservices">Configure IP address to access exposed services</h2><p>To configure IP addresses to access exposed services:</p><ol><li>Go to Security &gt; Allowed IP Addresses</li><li>To add an IP address, specify the IP address in the IP addresses field and click Add.</li><li>To remove an IP address, select the IP address from the View/Remove Selected IP Addresses for Exposed Services list.</li><li>Click Remove Selected to remove the IP addresses.<hr /><strong><em><a href="Administering%2BColdFusion%2BSecurity.html">#back to top</a></em></strong></li></ol><h2 id="AdministeringColdFusionSecurity-RestrictingaccesstoColdFusionAdministrator">Restricting access to ColdFusion Administrator</h2><p>You can restrict access to ColdFusion Administrator.</p><div class='panelMacro'><table class='noteMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/warning.png" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>Note</b><br /><p>By default, localhost and all IP addresses can access ColdFusion server.</p></td></tr></table></div><p>To add IP addresses that must be allowed access:</p><ol><li>Go to Security &gt; Allowed IP Addresses &gt; Add/Remove IP Addresses which will have Administrator access.</li><li>In the IP Address text box, specify the IP addresses.</li><li>Click Add.</li><li>Repeat the procedures to add more IP addresses.<br />Regular expressions are supported. That is, if you specify <code>10.<strong>.</strong>.*</code>, all IP addresses starting with <code>10.</code> are allowed access.<hr /><strong><em><a href="Administering%2BColdFusion%2BSecurity.html">#back to top</a></em></strong></li></ol><h2 id="AdministeringColdFusionSecurity-EnablingSecureProfileforColdFusionAdministrator">Enabling Secure Profile for ColdFusion Administrator</h2><p>ColdFusion allows you to secure ColdFusion server furthermore by enabling or disabling selected settings on the ColdFusion Administrator. When installing ColdFusion, you can enable Secure Profile by selecting the option when prompted on the Secure Profile screen. Further, you could provide a comma separate list of IP addresses that may be allowed to access the ColdFusion Administrator.</p><h3 id="AdministeringColdFusionSecurity-AdministratorsettingsaffectedbyenablingSecureProfile">Administrator settings affected by enabling Secure Profile</h3><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="confluenceTh"><p> </p></th><th class="confluenceTh"><p>Administrator Settings</p></th><th class="confluenceTh"><p>Path</p></th><th class="confluenceTh"><p>Default Admin Profile</p></th><th class="confluenceTh"><p>Secure Profile</p></th><th class="confluenceTh"><p>Changes to the setting post migration to ColdFusion 10</p></th></tr><tr><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>Use UUID for cftoken</p></td><td class="confluenceTd"><p><strong>Server Settings</strong> &gt; <strong>Settings</strong></p></td><td class="confluenceTd"><p>Enabled</p></td><td class="confluenceTd"><p>Enabled</p></td><td class="confluenceTd"><p>Overwritten</p></td></tr><tr><td class="confluenceTd"><p>2</p></td><td class="confluenceTd"><p>Disable access to internal ColdFusion Java components</p></td><td class="confluenceTd"><p><strong>Server Settings</strong> &gt; <strong>Settings</strong></p></td><td class="confluenceTd"><p>Disabled</p></td><td class="confluenceTd"><p>Enabled</p></td><td class="confluenceTd"><p>Overwritten</p></td></tr><tr><td class="confluenceTd"><p>3</p></td><td class="confluenceTd"><p>Enable Global Script Protection</p></td><td class="confluenceTd"><p><strong>Server Settings</strong> &gt; <strong>Settings</strong></p></td><td class="confluenceTd"><p>Enabled</p></td><td class="confluenceTd"><p>Enabled</p></td><td class="confluenceTd"><p>Overwritten</p></td></tr><tr><td class="confluenceTd"><p>4</p></td><td class="confluenceTd"><p>Maximum size of post data</p></td><td class="confluenceTd"><p><strong>Server Settings</strong> &gt; <strong>Settings</strong></p></td><td class="confluenceTd"><p>20MB</p></td><td class="confluenceTd"><p>20MB</p></td><td class="confluenceTd"><p>Overwritten</p></td></tr><tr><td class="confluenceTd"><p>5</p></td><td class="confluenceTd"><p>Missing Template Handler</p></td><td class="confluenceTd"><p><strong>Server Settings</strong> &gt; <strong>Settings</strong></p></td><td class="confluenceTd"><p>No Value</p></td><td class="confluenceTd"><p>Custom missing error template</p></td><td class="confluenceTd"><p>Retained if specified</p></td></tr><tr><td class="confluenceTd"><p>6</p></td><td class="confluenceTd"><p>Site-wide Error Handler</p></td><td class="confluenceTd"><p><strong>Server Settings</strong> &gt; <strong>Settings</strong></p></td><td class="confluenceTd"><p>No Value</p></td><td class="confluenceTd"><p>Custom site-wide error template</p></td><td class="confluenceTd"><p>Retained if specified</p></td></tr><tr><td class="confluenceTd"><p>7</p></td><td class="confluenceTd"><p>Request Queue Timeout Page</p></td><td class="confluenceTd"><p><strong>Server Settings</strong> &gt; <strong>Request Tuning</strong></p></td><td class="confluenceTd"><p>No value</p></td><td class="confluenceTd"><p>Custom error template</p></td><td class="confluenceTd"><p>Retained if specified</p></td></tr><tr><td class="confluenceTd"><p>8</p></td><td class="confluenceTd"><p>Cookie Timeout</p></td><td class="confluenceTd"><p><strong>Server Settings</strong> &gt; <strong>Memory Variables</strong></p></td><td class="confluenceTd"><p>15767000 minutes</p></td><td class="confluenceTd"><p>1440 minutes</p></td><td class="confluenceTd"><p>N/A</p></td></tr><tr><td class="confluenceTd"><p>9</p></td><td class="confluenceTd"><p>Disabling updating of ColdFusion internal cookies using ColdFusion tags/functions</p></td><td class="confluenceTd"><p><strong>Server Settings</strong> &gt; <strong>Memory Variables</strong></p></td><td class="confluenceTd"><p>Disabled</p></td><td class="confluenceTd"><p>Enabled</p></td><td class="confluenceTd"><p>N/A</p></td></tr><tr><td class="confluenceTd"><p>10</p></td><td class="confluenceTd"><p>Enable WebSocket Server</p></td><td class="confluenceTd"><p><strong>Server Settings</strong> &gt; <strong>WebSocket</strong></p></td><td class="confluenceTd"><p>Enabled</p></td><td class="confluenceTd"><p>Disabled</p></td><td class="confluenceTd"><p>N/A</p></td></tr><tr><td class="confluenceTd"><p>11</p></td><td class="confluenceTd"><p>Start Flash Policy Server</p></td><td class="confluenceTd"><p><strong>Server Settings</strong> &gt; <strong>WebSocket</strong></p></td><td class="confluenceTd"><p>Enabled</p></td><td class="confluenceTd"><p>Disabled</p></td><td class="confluenceTd"><p>N/A</p></td></tr><tr><td class="confluenceTd"><p>12</p></td><td class="confluenceTd"><p>Allowed SQL (all settings)</p></td><td class="confluenceTd"><p><strong>Data &amp; Services</strong> &gt; <strong>Data Sources</strong> &gt; <strong>database</strong> &gt; <strong>Advanced Settings</strong></p></td><td class="confluenceTd"><p>Enabled</p></td><td class="confluenceTd"><p>Create, Drop, Alter, Grant, Revoke, Stored Procedures are disabled</p></td><td class="confluenceTd"><p>Retained if specified</p></td></tr><tr><td class="confluenceTd"><p>13</p></td><td class="confluenceTd"><p>Enable Robust Exception Information</p></td><td class="confluenceTd"><p><strong>Debugging &amp; Logging</strong> &gt; <strong>Debug Output Settings</strong></p></td><td class="confluenceTd"><p>Disabled</p></td><td class="confluenceTd"><p>Disabled</p></td><td class="confluenceTd"><p>Overwritten</p></td></tr><tr><td class="confluenceTd"><p>14</p></td><td class="confluenceTd"><p>Enable CFSTAT</p></td><td class="confluenceTd"><p><strong>Debugging &amp; Logging</strong> &gt; <strong>Debug Output Settings</strong></p></td><td class="confluenceTd"><p>Enabled</p></td><td class="confluenceTd"><p>Disabled</p></td><td class="confluenceTd"><p>Overwritten</p></td></tr><tr><td class="confluenceTd"><p>15</p></td><td class="confluenceTd"><p>Select the type of Administrator authentication</p></td><td class="confluenceTd"><p><strong>Security</strong> &gt; <strong>Administrator</strong></p></td><td class="confluenceTd"><p>Use a single password only</p></td><td class="confluenceTd"><p>Separate user name and password authentication (allows multiple users)</p></td><td class="confluenceTd"><p>N/A</p></td></tr><tr><td class="confluenceTd"><p>16</p></td><td class="confluenceTd"><p>Enable RDS Service</p></td><td class="confluenceTd"><p><strong>Security</strong> &gt; <strong>RDS</strong></p></td><td class="confluenceTd"><p>Configurable at install time</p></td><td class="confluenceTd"><p>Disabled</p></td><td class="confluenceTd"><p>N/A</p></td></tr><tr><td class="confluenceTd"><p>17</p></td><td class="confluenceTd"><p>Select the type of RDS authentication</p></td><td class="confluenceTd"><p><strong>Security</strong> &gt; <strong>RDS</strong></p></td><td class="confluenceTd"><p>Use a single password only</p></td><td class="confluenceTd"><p>Separate user name and password authentication (allows multiple users)</p></td><td class="confluenceTd"><p>N/A</p></td></tr><tr><td class="confluenceTd"><p>18</p></td><td class="confluenceTd"><p>Enable ColdFusion Sandbox Security</p></td><td class="confluenceTd"><p><strong>Security</strong> &gt; <strong>Sandbox Security</strong></p></td><td class="confluenceTd"><p>Disabled</p></td><td class="confluenceTd"><p>Disabled</p></td><td class="confluenceTd"><p>Overwritten</p></td></tr><tr><td class="confluenceTd"><p>19</p></td><td class="confluenceTd"><p>Allowed IP addresses for ColdFusion Administrator access</p></td><td class="confluenceTd"><p><strong>Security</strong> &gt; <strong>Allowed IP Addresses</strong></p></td><td class="confluenceTd"><p>Not available at install time</p></td><td class="confluenceTd"><p>Available at install time</p></td><td class="confluenceTd"><p>N/A</p></td></tr></tbody></table></div><div class='panelMacro'><table class='noteMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/warning.png" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>Note</b><br /><p>Secure Profile disables Directory Browsing for a stand alone ColdFusion installation with built-in web server.</p></td></tr></table></div><p> </p><blockquote><p><strong>COMMUNITY CONTRIBUTED HELP</strong></p><p>The page above explains that if the &quot;secure profile&quot; option is taken during installation, ColdFusion will set the 3 error handlers to a value that is shown above merely as &quot;Custom missing error template&quot;.</p><p>More specifically, and particularly if anyone may remove them from the CF Admin and need to add them back, the three templates can be found in this directory in your installation: C:\ColdFusion10\cfusion\wwwroot\CFIDE\administrator\templates, and are named (in the order listed above):<span style="color: rgb(0,0,0);line-height: 13.0pt;"> </span></p><ul><li>secure_profile_error.cfm</li><li>missing_template_error.cfm</li><li>request_timeout_error.cfm</li></ul><p>So for instance, to put the &quot;default&quot; &quot;secure&quot; sitewide error handler back in place, provide this value for the CF Admin&gt;Settings&gt;Site-wide Error Handler:</p><ul><li>/CFIDE/administrator/templates/secure_profile_error.cfm</li></ul></blockquote><h2 id="AdministeringColdFusionSecurity-ChangesinSecureProfileColdFusion11">Changes in Secure Profile (ColdFusion 11)</h2><p>When installing ColdFusion Server, you can enable Secure Profile by selecting the option when prompted on the Secure Profile screen. Further, you could provide a comma separate list of IP addresses that may be allowed to access the ColdFusion Administrator. This feature has been available from ColdFusion 10. In ColdFusion 11, Secure Profile has been enhanced to handle access to other internal components too. For instance, you can set restrictions for following URLs:</p><ul><li><em>CFIDE/main/*</em></li><li><em>CFIDE/adminapi/*</em></li><li><em>CFIDE/administrator/*</em></li><li><em>CFIDE/componentutils/*</em></li><li><em>CFIDE/wizards/*</em></li><li><em>CFIDE/servermanager/*</em></li></ul><p>To allow IP addresses to access the internal ColdFusion components, perform the following tasks:</p><ol><li>Login to ColdFusion Administrator</li><li>Click Security &gt; Allow IP Addresses</li><li>Go to <strong>Allow IP Addresses for accessing ColdFusion Administrator and ColdFusion Internal Directories</strong> section and add grant access to  individual IP address to access the internal components as shown in the following figure:<br /><img class="confluence-embedded-image" width="500" src="attachments/87505908/142835714.png" data-image-src="attachments/87505908/142835714.png"> </li></ol><p> </p><p>If you have configured an external web server, you can also restrict access to the ColdFusion Administrator and ColdFusion Internal Directories at the connector-level by modifying the iprestriction.properties file available under the connector folder. For instance, <em>&lt;cf_root&gt;</em>/config/wsconfig//iprestriction.properties. <br /><br /></p><div class='panelMacro'><table class='infoMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/information.png" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><strong>Note</strong> : You will need to restart the external web server after modifying the iprestriction.properties file. </td></tr></table></div><p>For more information, <a href="https://wikidocs.adobe.com/wiki/display/coldfusionen/IP+Restriction+for+CFIDE+URLs" rel="nofollow">see this document</a>.</p><h2 id="AdministeringColdFusionSecurity-Usingsandboxsecurity">Using sandbox security</h2><p>Sandbox security (called Resource security in the Standard Edition) uses the location of your ColdFusion pages to control access to ColdFusion resources. A <em>sandbox</em> is a designated directory of your site to which you apply security restrictions. Sandbox security lets you specify which tags, functions, and resources (for example, files, directories, and data sources) can be used by ColdFusion pages located in and under the designated directory.<br />To use sandbox security in the J2EE editions, the application server must be running a security manager (<code>java.lang.SecurityManager</code>) and you define the following JVM arguments (for Tomcat, this is the java.args line in the <em>cf_root</em>/cfusion/bin/jvm.config file):</p><div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="theme: Confluence; brush: actionscript; gutter: false" style="font-size:12px;">-Djava.security.manager &quot;-Djava.security.policy=cf_root/WEB-INF/cfusion/lib/coldfusion.policy&quot; &quot;-Djava.security.auth.policy=cf_root/WEB-INF/cfusion/lib/neo_jaas.policy&quot; 
</pre>
</div></div><div class='panelMacro'><table class='noteMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/warning.png" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>Note</b><br /><p>Sandbox security is not enabled by default. You enable it on the Security &gt; Sandbox Security page before ColdFusion enforces the settings.</p></td></tr></table></div><h3 id="AdministeringColdFusionSecurity-UsingmultiplesandboxesEnterpriseEditiononly">Using multiple sandboxes (Enterprise Edition only)</h3><p>By default, a subdirectory of a sandbox inherits the settings of the directory one level above it. However, if you define a sandbox for a subdirectory, the subdirectory no longer inherits settings from the parent, completely overriding the parent directory's sandbox settings. For example, consider the following directories:</p><div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="theme: Confluence; brush: actionscript; gutter: false" style="font-size:12px;">C:\Inetpub\wwwroot 
C:\Inetpub\wwwroot\sales 
C:\Inetpub\wwwroot\rnd 
C:\Inetpub\wwwroot\rnd\dev 
C:\Inetpub\wwwroot\rnd\&#39;a
</pre>
</div></div><p>If you define a sandbox for the wwwroot directory, the settings also apply to the sales and rnd directories. If you also define a sandbox for the rnd directory, the rnd sandbox settings also apply to the dev and qa directories. The wwwroot and sales directories maintain their original settings, and the rnd settings override the wwwroot directory settings for the rnd directory and subdirectories.<br />This hierarchical arrangement of security permits the configuration of personalized sandboxes for users with different security levels. For example, if you are a web hosting administrator who hosts several clients on a ColdFusion shared server, you can configure a sandbox for each customer. This prevents one customer from accessing the data sources or files of another customer.</p><h3 id="AdministeringColdFusionSecurity-Resourcesthatyoucanrestrict">Resources that you can restrict</h3><p>You can restrict the following resources:</p><ul><li><strong>Data Sources</strong> Restrict the use of ColdFusion data sources.</li><li><strong>CF Tags</strong> Restrict the use of ColdFusion tags that manipulate resources on the server (or on an external server), such as files, the registry, Lightweight Directory Access Protocol (LDAP), mail, and the log.</li><li><strong>CF Functions</strong> Restrict the use of ColdFusion functions that access the file system.</li><li><p><strong>Files/Dirs</strong>Enable tags and functions in the sandbox to access files and directories outside the sandbox.</p><div class='panelMacro'><table class='noteMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/warning.png" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>Note</b><br /><p>To use the Administrator API when sandbox security is enabled, allow access to the cf_web_root/CFIDE/adminapi directory.</p></td></tr></table></div></li><li><p><strong>Server/Ports</strong>Specify the servers, ports, and port ranges that the ColdFusion tags that call third-party resources can use.For more information, see the Administrator online Help.</p><div class='panelMacro'><table class='noteMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/warning.png" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>Note</b><br /><p>When you run ColdFusion in the J2EE configuration on IBM WebSphere, the Files/Dirs and Server/Ports tabs are not enabled.</p></td></tr></table></div></li></ul><h3 id="AdministeringColdFusionSecurity-Aboutdirectoriesandpermissions">About directories and permissions</h3><p>When you enable access to files outside the sandbox, you specify the filename. When you enable access to directories outside the sandbox, you specify <em>directoryname</em>_indicator_, where <em>indicator</em> is a dash or asterisk, as follows:</p><ul><li>A backslash followed by a dash (-) lets tags and functions access all files in the specified directory, and recursively allows access to all files in subdirectories.</li><li>A backslash followed by an asterisk (*) lets tags and functions access all files in the specified directory and also lets tags and functions access a list of subdirectories. However, this option denies access to files in any subdirectories.<br />You can also specify the actions that ColdFusion tags and functions can perform on files and directories outside the sandbox. The following table shows the relationship between the permissions of a file and a directory:</li></ul><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="confluenceTh"><p>Permission</p></th><th class="confluenceTh"><p>Effect on files</p></th><th class="confluenceTh"><p>Effect on directories</p></th></tr><tr><td class="confluenceTd"><p>Read</p></td><td class="confluenceTd"><p>View the file</p></td><td class="confluenceTd"><p>List all files in the directory</p></td></tr><tr><td class="confluenceTd"><p>Write</p></td><td class="confluenceTd"><p>Write to the file</p></td><td class="confluenceTd"><p>Not applicable</p></td></tr><tr><td class="confluenceTd"><p>Execute</p></td><td class="confluenceTd"><p>Execute the file</p></td><td class="confluenceTd"><p>Not applicable</p></td></tr><tr><td class="confluenceTd"><p>Delete</p></td><td class="confluenceTd"><p>Delete the file</p></td><td class="confluenceTd"><p>Delete the directory</p></td></tr></tbody></table></div><h3 id="AdministeringColdFusionSecurity-AddasandboxEnterpriseEditiononly">Add a sandbox (Enterprise Edition only)</h3><p>ColdFusion Enterprise Edition lets you define multiple security sandboxes.</p><ol><li>Open the Security &gt; Sandbox Security page in the ColdFusion Administrator. The Sandbox Security Permissions page appears.</li><li>In the Add Security Sandbox box, enter the name of the new sandbox. This name must be either a ColdFusion mapping (defined in the Administrator) or an absolute path.</li><li>Select New Sandbox from the drop-down list to create a sandbox based on the default sandbox, or select an existing sandbox to copy its settings to your new sandbox.</li><li>Click Add. The new sandbox appears in the list of Defined Directory Permissions.</li></ol><h3 id="AdministeringColdFusionSecurity-Configureasandbox">Configure a sandbox</h3><p>Before you begin security sandbox configuration, analyze your application and its usage to determine the tags, functions, and resources that it requires. You can then configure the sandbox to enable access to the required resources and disable use of the appropriate tags and functions. For example, if the applications in the sandbox do not use the <code>cfregistry</code> tag, you can safely disable it.</p><div class='panelMacro'><table class='noteMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/warning.png" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>Note</b><br /><p>In the Standard Edition, the Root Security Context is the only sandbox without any initial list of defined directory permissions.</p></td></tr></table></div><ol><li>Open the Security &gt; Sandbox Security page (Security &gt; Resource Security page in the Standard Edition) in the ColdFusion Administrator.</li><li>(Enterprise Edition only) In the list of Defined Directory Permissions, click the name or Edit icon for the directory.A page with several tabs appears. This is the initial page in the Standard Edition. The remaining steps describe the use of each tab.</li><li><p>To disable a data source, in the left column of the Datasources tab, highlight the data source, and click the right arrow.By default, ColdFusion pages in this sandbox can access all data sources.</p><div class='panelMacro'><table class='noteMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/warning.png" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>Note</b><br /><p>If &lt;&lt;ALL DATASOURCES&gt;&gt; is in the Enabled Datasources column, any data source that you add is enabled. If you move &lt;&lt;ALL DATASOURCES&gt;&gt; to the Disabled Datasources column, any new data source is disabled.</p></td></tr></table></div></li><li>Click the CFTags tab.</li><li>To disable tags, in the left column of the CFTags tab, highlight the tags, and click the right arrow.By default, ColdFusion pages in this sandbox can access all listed tags.</li><li>Click the CFFunctions tab.</li><li>To disable functions, in the left column of the CFFunctions tab, highlight the functions, and click the right arrow.By default, ColdFusion pages in this sandbox can access all listed functions.</li><li>Click the Files/Dirs tab.</li><li>To enable files or directories, in the File Path box, enter or browse to the files or directories; for example, C:\pix. A file path that consists of the special token &lt;&lt;ALL FILES&gt;&gt; matches any file. For information on using the backslash-hyphen (-) and backslash-asterisk (*) wildcard characters, see About directories and permissions.</li><li>Select the permissions.For example, select the Read check box to let ColdFusion pages in the mytestapps sandbox read files in the C:\pix directory.</li><li>Click Add Files/Paths. When you edit an existing sandbox, this button reads Edit Files/Paths. The file path and its permissions appear in the Secured Files and Directories list.</li><li><p>In the Secured Files and Directories list, verify that the file path is correct. The character after the backslash is important. For information, see About directories and permissions.</p><div class='panelMacro'><table class='noteMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/warning.png" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>Note</b><br /><p>The Files/Dirs tab works together with the file-based permissions of the operating system. To restrict a user from browsing another user's directory, use file-based permissions.</p></td></tr></table></div></li><li>Click the Server/Ports tab.</li><li><p>To turn off default behavior (global access to all servers and ports), enter the IP addresses and port numbers that pages in this sandbox can connect to by using tags that access external resources (for example, <code>cfmail</code>, <code>cfpop</code>, <code>cfldap</code>, <code>cfhttp</code>, and so on). You can specify an IP address, a server name (such as <a href="http://www.someservername.com" class="external-link" rel="nofollow">www.someservername.com</a>), or a domain name (such as someservername.com). You can optionally specify a port restriction.</p><div class='panelMacro'><table class='noteMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/warning.png" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>Note</b><br /><p>This behavior differs from other tabs, such as CFTags, where you select items to disable. If you set any values in this tab, external-resource tags executed in this sandbox can access only the specified servers and ports.</p></td></tr></table></div><p>For example, to allow this sandbox access to 207.88.220.3 on ports 80 and lower, perform the following steps:</p><br /><ol><li>In the IP Address field, enter 207.88.220.3.</li><li><p>In the Port field, enter 80, and click This Port and Lower.</p><div class='panelMacro'><table class='noteMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/warning.png" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>Note</b><br /><p>To deny access by these ColdFusion tags to an entire site, enable access for a local resource, such as your local mail server, FTP server, and so on.</p></td></tr></table></div></li></ol></li><li>Click Finish to save changes to the sandbox.</li></ol><h3 id="AdministeringColdFusionSecurity-SandboxConsiderations">Sandbox Considerations</h3><h4 id="AdministeringColdFusionSecurity-UsingOpenOfficewithinSandbox">Using OpenOffice within Sandbox</h4><p>Grant permissions in sandbox for the following filepaths:</p><ul><li>D:\ColdFusion10\cfusion\runtime\servers\lib Read</li><li>D:\ColdFusion10\cfusion\runtime\servers\lib- Read</li><li>D:\ColdFusion10\cfusion\runtime\lib- Read</li><li>D:\ColdFusion10\cfusion\runtime\lib Read</li><li>C:\Program Files\OpenOffice.org 3\ Read, Execute</li><li>C:\Program Files\OpenOffice.org 3- Read<br />, Execute</li></ul><h4 id="AdministeringColdFusionSecurity-UsingCachingwithinSandbox">Using Caching within Sandbox</h4><p>For disk-based caching to work inside a sandbox, the sandbox must provide read/write permission to the disk cache directory. This can be the default directory (<code>java.io.tmpdir</code>) or a user-configured directory as identified by the <code>diskStore</code> property. The <code>diskStore</code> property in <em>cf_root</em>\lib\ehcache.xml is used to specify the directory for disk cache (<code>&lt;diskStore path=&quot;java.io.tmpdir&quot;/&gt;</code>).Use the following code to identify the temp directory:</p><div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="theme: Confluence; brush: actionscript; gutter: false" style="font-size:12px;">&lt;cfscript&gt; 
writeoutput(&quot;Temp Dir : &quot; &amp; createobject(&quot;java&quot;,&quot;java.lang.System&quot;).getProperty(&quot;java.io.tmpdir&quot;) ); 
&lt;/cfscript&gt;
</pre>
</div></div><p>Also, read permission must be granted to cf_root\lib\ehcache.xml for certain functions that read from/write to ehCache.xml to work. For example, <code>cacheGetProperties</code> and <code>cacheSetProperties</code>.</p><h4 id="AdministeringColdFusionSecurity-UsingServiceCFCswithinSandbox">Using Service CFCs within Sandbox</h4><p>Grant the following permissions:</p><ul><li>execute permission to <em>cf_root</em>\CustomTags\com\adobe\coldfusion</li><li>read permission to <em>cf_root</em>\WEB-INF\cftags\META_INF\taglib.tld</li></ul>
                    </div>

                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/87505908/142835713.png">image2014-4-24 11:59:14.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/87505908/142835714.png">image2014-4-24 12:5:16.png</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                 
                </div>             </div> 
            <div id="footer" style="background: url(https://wikidocs.adobe.com/wiki/images/border/border_bottom.gif) repeat-x;">
                <p><small>Document generated by Confluence on Apr 02, 2015 02:19</small></p>
            </div>
        </div>     </body>
</html>
